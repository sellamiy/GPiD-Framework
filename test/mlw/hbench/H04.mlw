module H04

  use int.Int
  use ref.Ref

  (* Example: Finding Square Roots *)

  let sqrt (x: ref int) (z: ref int)
    requires { !x >= 0 }
    ensures { !z * !z <= !x < (!z + 1) * (!z + 1) }
    diverges
  = z := 0;
    while (!z + 1) * (!z + 1) <= !x do
      (* Solution: 0 <= !z /\ !z * !z <= !x *)
      invariant { ((((!z * !z) <= !x))) }
      z := !z + 1
    done

end