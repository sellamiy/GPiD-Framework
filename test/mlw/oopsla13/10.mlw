module Oopsla10
 use int.Int
 use ref.Ref

 val unknown (unit) : bool

 let main (void) : unit
  diverges
 = let w = ref true in let z = ref false in let x = ref 0 in let y = ref 0 in

   while unknown() do
    invariant { !x = !y /\ !w <> !z }
    if !w then begin
     x := !x + 1;
     w := not !w;
    end;
    if not !z then begin
     y := !y + 1;
     z := not !z;
    end;
   done;

   assert { !x = !y }

end
