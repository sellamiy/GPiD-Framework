module Oopsla17
 use int.Int
 use ref.Ref

 let main(n: int) : unit
  diverges
 = let k = ref 1 in let i = ref 1 in let j = ref 0 in

   while !i < n do
    invariant { !k >= !i /\ !k > 0 }
    j := 0;
    while !j < !i do
     invariant {( !j > 0 -> !k > !i )/\ !k > 0 }
     k := !k + !i - !j;
     j := !j + 1
    done;
    i := !i + 1;
   done;

   assert { !k >= n }

end
