module Oopsla25
 use int.Int
 use ref.Ref

 val unknown1 (unit) : bool
 val unknown2 (unit) : bool

 let main (void) : unit
  diverges
 = let x = ref 0 in let y = ref 0 in let i = ref 0 in let j = ref 0 in

   while unknown1() do
    invariant { true }

    while unknown2() do
     invariant { true }
     if !x = !y then
      i := !i + 1
     else
      j := !j + 1
    done;

    if !i >= !j then begin
     x := !x + 1;
     y := !y + 1;
    end else
     y := !y + 1
   done;

   assert { !i >= !j }

end
