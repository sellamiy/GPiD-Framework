module Oopsla15
 use int.Int
 use ref.Ref

 val unknown1 (unit) : int ensures { result > 0 }
 val unknown2 (v: int) : int ensures { result > v }

 let main (void) : unit
  diverges
 = let j = ref 0 in let n = ref (unknown1()) in
   let k = ref (unknown2(!n)) in

  while !j < !n do
   invariant { !k >= !n - !j /\ !k >= 0 }
   j := !j + 1;
   k := !k - 1;
  done;

  assert { !k >= 0 }

end
