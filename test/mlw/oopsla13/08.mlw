module Oopsla08
 use int.Int
 use ref.Ref

 val unknown1 (unit) : bool
 val unknown2 (unit) : bool
 val unknown3 (unit) : bool

 let main (void) : unit
  diverges
 = let x = ref 0 in let y = ref 0 in

   while unknown1() do
    invariant { true }

    if unknown2() then begin
     x := !x + 1;
     y := !y + 100;
    end else
     if unknown3() then begin
      if !x >= 4 then begin
       x := !x + 1;
       y := !y + 1;
      end;
      if !x < 0 then y := !y - 1;
     end

   done;

   assert { (!x < 4) \/ (!y > 2) }

end
